\usepackage[a4paper,margin=2cm]{geometry}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{float}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{amsmath,amssymb}
\usepackage{siunitx}
\usepackage{hyperref}
\usepackage{pgfgantt}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{tabularx}
\usepackage{titlesec}
\usepackage{fancyhdr}
\usepackage{setspace}
\usepackage{bibentry}
% Microtype removed to avoid noisy patch warnings; re-enable later if desired.
% \usepackage{microtype}
\usepackage{enumitem}
\usepackage{tocloft}

% More compact line spacing to help meet the 10-page limit
\singlespacing

% Paragraph layout: no first-line indent, small vertical gap
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.5em}

% Use section-style numbering (1, 2, 3, ...) instead of chapter.section
\renewcommand\thesection{\arabic{section}}
\renewcommand\thesubsection{\thesection.\arabic{subsection}}
\renewcommand\thesubsubsection{\thesubsection.\arabic{subsubsection}}

% Document-wide numbering depth
\setcounter{tocdepth}{2}
\setcounter{secnumdepth}{3}

% Hyperlink styling for print-friendly output
\hypersetup{
  colorlinks=true,
  linkcolor=black,
  citecolor=black,
  urlcolor=blue,
  pdfauthor={Harry Carless, Rahul Verma, Marima Yoo},
  pdftitle={ELEC5333M - Wireless Communication System Group Lab Report},
}

% Tighter, consistent list spacing
\setlist[itemize]{topsep=4pt,itemsep=2pt,parsep=0pt}
\setlist[enumerate]{topsep=4pt,itemsep=2pt,parsep=0pt}

% Figure and table caption style and spacing
\captionsetup{font=small,labelfont=bf,skip=4pt}
\setlength{\textfloatsep}{8pt plus 2pt minus 4pt}
\setlength{\floatsep}{8pt plus 2pt minus 4pt}
\setlength{\intextsep}{8pt plus 2pt minus 4pt}

% Chapter and section heading layout
\titleformat{\chapter}[display]
  {\normalfont\bfseries\huge}
  {Lab~\thechapter}
  {0.4em}
  {\titlerule\vspace{0.8ex}}
\titlespacing*{\chapter}{0pt}{-8pt}{8pt}

\newcolumntype{Y}{>{\raggedright\arraybackslash}X}

\titleformat{\section}{\normalfont\normalsize\bfseries\raggedright}{\thesection}{0.8em}{}
\titlespacing*{\section}{0pt}{12pt}{6pt}

\titleformat{\subsection}{\normalfont\small\bfseries\raggedright}{\thesubsection}{0.6em}{}
\titlespacing*{\subsection}{0pt}{10pt}{4pt}

% Header and footer styling
\setlength{\headheight}{15pt}
\pagestyle{fancy}
\fancyhf{}
% One-sided header setup to avoid 'E' option warnings
\fancyhead[R]{\thepage}
\fancyhead[L]{\nouppercase{\leftmark}}
\renewcommand{\headrulewidth}{0.4pt}

\fancypagestyle{plain}{%
  \fancyhf{}
  \fancyhead[R]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
}

\renewcommand{\chaptermark}[1]{\markboth{Lab~\thechapter\quad #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\quad #1}}

% Relax paragraph breaking to avoid minor overfull boxes in drafting
\emergencystretch=3em
\raggedbottom
